---
#root.host.prefix=
#root.host.suffix=

local:
  ip: "${(NetworkInterface.getNetworkInterfaces().toList().collectMany{ it.getInetAddresses().findAll{it instanceof Inet4Address} }.find{ !(it.getHostAddress() =~ '127[.]0[.]0[.]1|192[.]168[.].*') } ?: InetAddress.getLocalHost()).getHostAddress() }"


# wso2is
# the following config is for docker-compose run on local
server:
  ids:
    # [id]entity [s]erver
    # product: wso2is-5.3.0
    local:
      host: ${env.ENV_PREFIX}ids${env.ENV_SUFFIX}
      port:
        http: 9763
        https: 9443
    public:
      ## public host for local docker-compose is localhost
      ## and public port is one you defined in docker-compose.yaml service: ports:
      host: ${env.EXTERNAL_IP}
      port: 
        http: "${env.PORT_HTTP ?: server.ids.local.port.http}"
        https: "${env.PORT_HTTPS ?: server.ids.local.port.https}"
  idx:
    # [id]entity server analyti[cs]
    # product: wso2is-analytics-5.3.0
    local:
      host: ${env.ENV_PREFIX}idx${env.ENV_SUFFIX}
      port:
        http: 9763
        https: 9443
    public:
      ## public host for local docker-compose is localhost
      ## and public port is one you defined in docker-compose.yaml service: ports:
      host: ${env.EXTERNAL_IP}
      port: 
        http: "${env.PORT_HTTP ?: server.idx.local.port.http}"
        https: "${env.PORT_HTTPS ?: server.idx.local.port.https}"


# common jvm properties

jvm:
  xms: 512m
  xmx: 2048m
  max_perm_size: 256m

# 
log4j:
  DEBUG: false

# Ports offset. This entry will set the value of the ports defined below to the define value + Offset.
# e.g. Offset=2 and HTTPS port=9443 will set the effective HTTPS port to 9445
carbon:
  offset: 0
  HideAdminServiceWSDLs: true

# conf/identity.xml
identity:
  session_datasource: WSO2_CARBON_DB
  SessionIdleTimeout: 15
  RememberMeTimeout: 20160
  EnableThriftService: false
